generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  name      String
  email     String   @unique
  image     String?
  createdAt DateTime @default(now())
  albums    Album[]
  albumOrder    Int[]
}

model Photo {
  pid               String    @id
  name              String
  uid               Int
  aid               Int?
  aperture          Float?
  iso               Int?
  shutterspeed      String?
  thumbnailForAlbum Album?    @relation("thumbnail")
  album             Album?    @relation(fields: [aid, uid], references: [aid, uid])
  description       String?
  date              DateTime?
}

model Album {
  aid          Int     @default(autoincrement())
  name         String
  uid          Int
  thumbnailPid String? @unique
  thumbnail    Photo?  @relation("thumbnail", fields: [thumbnailPid], references: [pid])
  user         User    @relation(fields: [uid], references: [id])
  photos       Photo[]
  photoOrder    String[]
 
  @@id([aid, uid])
}
