generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id          Int          @id @default(autoincrement())
  name        String
  email       String       @unique
  image       String?
  createdAt   DateTime     @default(now())
  collections Collection[]
  photos      Photo[]
}

model Photo {
  pid                    String      @id
  name                   String
  uid                    Int
  cid                    Int?
  aperture               Decimal?
  iso                    Int?
  shutterspeed           String?
  thumbnailForCollection Collection? @relation("thumbnail")
  collection             Collection? @relation(fields: [cid], references: [cid])
  user                   User        @relation(fields: [uid], references: [id])
}

model Collection {
  cid          Int     @id @default(autoincrement())
  name         String
  uid          Int
  thumbnailPid String? @unique
  thumbnail    Photo?  @relation("thumbnail", fields: [thumbnailPid], references: [pid])
  user         User    @relation(fields: [uid], references: [id])
  photos       Photo[]
}
